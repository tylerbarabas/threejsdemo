<html>
<head>
  <script src="js/build/three.js"></script>
</head>
<body>
<script>
var scene = new THREE.Scene();
var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );

var renderer = new THREE.WebGLRenderer();
renderer.setSize( window.innerWidth, window.innerHeight );
document.body.appendChild( renderer.domElement );

var skyGeometry = new THREE.BoxGeometry( 1, 1, 1 );
var loader = new THREE.CubeTextureLoader();
var path = "js/examples/textures/cube/Park3Med/";
var format = '.jpg';
var urls = [
    path + 'px' + format, path + 'nx' + format,
    path + 'py' + format, path + 'ny' + format,
    path + 'pz' + format, path + 'nz' + format
  ];
var textureCube = loader.load([
  urls[1],
  urls[0],
  urls[3],
  urls[2],
  urls[4],
  urls[5]
]);

var skyMaterial = new THREE.MeshBasicMaterial({
  color: 0xffffff,
  envMap: textureCube,
  side: THREE.BackSide
});
var skyCube = new THREE.Mesh( skyGeometry, skyMaterial );
skyCube.scale.set(400,400,400);
scene.add( skyCube );

var light = new THREE.AmbientLight( 0xFFFFFF ); // soft white light
scene.add( light );

document.body.addEventListener('mousemove',function(e){

	//set number of degrees allowed to rotate
	var threshold = {
		x: 360,
		y: 360
	};

	//calculate mouse center point
	var midpoint = {x: document.body.clientWidth/2, y: document.body.clientHeight/2};

	var distanceFromMidpoint = {x: ((e.clientX - midpoint.x)/document.body.offsetWidth)*200, y: ((e.clientY - midpoint.y)/document.body.offsetHeight)*200};

	var position = {x: (threshold.x/100)*distanceFromMidpoint.x, y: (threshold.y/100)*distanceFromMidpoint.y};

	//also need to account for rotation.z, will fix later
	camera.rotation.y = position.x/-100;
	camera.rotation.x = position.y/-100;

	console.log(camera.rotation);
});

window.addEventListener('keydown',function(e){
  switch (e.which) {
    case 37: camera.rotation.y += 0.1;
      break;
    case 38: camera.rotation.x += 0.1;
      break;
    case 39: camera.rotation.y -= 0.1;
      break;
    case 40: camera.rotation.x -= 0.1;
      break;
  }
});

var render = function () {
    requestAnimationFrame( render );

    skyCube.position.copy(camera.position);

    renderer.render(scene, camera);
};

render();

</script>
</body>
</html>
